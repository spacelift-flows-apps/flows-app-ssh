{
  "name": "SSH Test",
  "blocks": [
    {
      "id": "appEntity_0",
      "nameComponent": { "name": "Execute Command", "description": "" },
      "positionComponent": {
        "position": {
          "x": 279,
          "y": 162
        }
      },
      "appEntityComponent": {
        "appInstallationId": "019721b7-d904-7e42-9c75-2a72efc251e5",
        "blockKey": "executeCommand",
        "schema": {
          "order": 0,
          "name": "Execute Command",
          "category": "Execution",
          "description": "Executes a single command on a remote host via SSH.",
          "config": {},
          "hasOnInternalMessage": false,
          "inputs": {
            "default": {
              "order": 0,
              "name": "Execute",
              "description": "Execute the specified command on the remote host.",
              "config": {
                "command": {
                  "order": 2,
                  "name": "Command",
                  "description": "The command to execute.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "host": {
                  "order": 0,
                  "name": "Host",
                  "description": "Hostname or IP address to connect to.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "port": {
                  "order": 1,
                  "name": "Port",
                  "description": "SSH port for this connection.",
                  "type": {
                    "type": "number"
                  },
                  "fixed": false,
                  "required": true,
                  "default": 22,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "username": {
                  "order": 3,
                  "name": "Username",
                  "description": "Override the default SSH username for this connection.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": false,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "workingDirectory": {
                  "order": 4,
                  "name": "Working Directory",
                  "description": "Working directory for the command.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": false,
                  "hasValidator": false,
                  "fieldKey": ""
                }
              },
              "hasOnEvent": true
            }
          },
          "outputs": {
            "default": {
              "order": 0,
              "name": "Command Executed",
              "description": "Emitted when the command has been executed successfully.",
              "default": true,
              "possiblePrimaryParents": ["default"],
              "type": {
                "properties": {
                  "duration": {
                    "description": "Execution time in milliseconds.",
                    "type": "number"
                  },
                  "exitCode": {
                    "description": "Exit code of the command.",
                    "type": "number"
                  },
                  "stderr": {
                    "description": "Standard error from the command.",
                    "type": "string"
                  },
                  "stdout": {
                    "description": "Standard output from the command.",
                    "type": "string"
                  }
                },
                "required": ["stdout", "stderr", "exitCode", "duration"],
                "type": "object"
              }
            }
          },
          "signals": {},
          "hasOnSync": false,
          "hasOnDrain": false,
          "hasOnTimer": false
        },
        "configExprs": {}
      },
      "eventProcessingComponent": {
        "active": true,
        "outputs": [
          {
            "outputKey": "default",
            "outputCustomizationExpr": null
          }
        ],
        "appBlock": {
          "inputs": [
            {
              "inputKey": "default",
              "configExprs": {
                "command": {
                  "code": "\"echo test\""
                },
                "host": {
                  "code": "ref(\"signal.variables.host\")"
                },
                "port": {
                  "code": "2222"
                }
              }
            }
          ]
        }
      }
    },
    {
      "id": "appEntity_1",
      "nameComponent": { "name": "Host Metadata", "description": "" },
      "positionComponent": {
        "position": {
          "x": 0,
          "y": 161
        }
      },
      "appEntityComponent": {
        "appInstallationId": "019721b7-d904-7e42-9c75-2a72efc251e5",
        "blockKey": "hostMetadata",
        "schema": {
          "order": 4,
          "name": "Host Metadata",
          "category": "Host Info",
          "description": "Retrieves and exposes host metadata as signals.",
          "config": {
            "host": {
              "order": 0,
              "name": "Host",
              "description": "Hostname or IP address to connect to.",
              "type": {
                "type": "string"
              },
              "fixed": false,
              "required": true,
              "hasValidator": false,
              "fieldKey": ""
            },
            "port": {
              "order": 1,
              "name": "Port",
              "description": "SSH port for this connection.",
              "type": {
                "type": "number"
              },
              "fixed": false,
              "required": true,
              "default": 22,
              "hasValidator": false,
              "fieldKey": ""
            },
            "username": {
              "order": 2,
              "name": "Username",
              "description": "Override the default SSH username for this connection.",
              "type": {
                "type": "string"
              },
              "fixed": false,
              "required": false,
              "hasValidator": false,
              "fieldKey": ""
            }
          },
          "hasOnInternalMessage": false,
          "inputs": {},
          "outputs": {},
          "signals": {
            "architecture": {
              "order": 3,
              "name": "Architecture",
              "description": "System architecture (e.g., 'x86_64')."
            },
            "hostname": {
              "order": 0,
              "name": "Hostname",
              "description": "The hostname of the remote system."
            },
            "loadAverage": {
              "order": 5,
              "name": "Load Average",
              "description": "Load average with 1, 5, and 15 minute values."
            },
            "memoryFree": {
              "order": 7,
              "name": "Memory Free",
              "description": "Free memory in bytes."
            },
            "memoryTotal": {
              "order": 6,
              "name": "Memory Total",
              "description": "Total memory in bytes."
            },
            "osRelease": {
              "order": 2,
              "name": "OS Release",
              "description": "OS version/release information."
            },
            "osType": {
              "order": 1,
              "name": "OS Type",
              "description": "Operating system type (e.g., 'linux', 'darwin')."
            },
            "uptime": {
              "order": 4,
              "name": "Uptime",
              "description": "System uptime in seconds."
            }
          },
          "hasOnSync": true,
          "hasOnDrain": false,
          "hasOnTimer": false
        },
        "configExprs": {
          "host": {
            "code": "ref(\"signal.variables.host\")"
          },
          "port": {
            "code": "2222"
          }
        }
      },
      "eventProcessingComponent": {
        "active": true,
        "outputs": [],
        "appBlock": {
          "inputs": []
        }
      },
      "lifecycleComponent": {}
    },
    {
      "id": "appEntity_2",
      "nameComponent": { "name": "Upload File", "description": "" },
      "positionComponent": {
        "position": {
          "x": 552,
          "y": 161
        }
      },
      "appEntityComponent": {
        "appInstallationId": "019721b7-d904-7e42-9c75-2a72efc251e5",
        "blockKey": "uploadFile",
        "schema": {
          "order": 2,
          "name": "Upload File",
          "category": "File Transfer",
          "description": "Uploads a file to the remote host via SCP/SFTP.",
          "config": {},
          "hasOnInternalMessage": false,
          "inputs": {
            "default": {
              "order": 0,
              "name": "Upload",
              "description": "Upload the specified file to the remote host.",
              "config": {
                "content": {
                  "order": 2,
                  "name": "Content",
                  "description": "File content (base64 encoded for binary, plain text for text files).",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "destinationPath": {
                  "order": 3,
                  "name": "Destination Path",
                  "description": "Full path where to save the file.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "encoding": {
                  "order": 5,
                  "name": "Encoding",
                  "description": "Content encoding: 'base64' or 'text'.",
                  "type": {
                    "enum": ["base64", "text"],
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "default": "text",
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "host": {
                  "order": 0,
                  "name": "Host",
                  "description": "Hostname or IP address to connect to.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "permissions": {
                  "order": 6,
                  "name": "Permissions",
                  "description": "File permissions in octal format (e.g., '0644').",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": false,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "port": {
                  "order": 1,
                  "name": "Port",
                  "description": "SSH port for this connection.",
                  "type": {
                    "type": "number"
                  },
                  "fixed": false,
                  "required": true,
                  "default": 22,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "username": {
                  "order": 4,
                  "name": "Username",
                  "description": "Override the default SSH username for this connection.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": false,
                  "hasValidator": false,
                  "fieldKey": ""
                }
              },
              "hasOnEvent": true
            }
          },
          "outputs": {
            "default": {
              "order": 0,
              "name": "File Uploaded",
              "description": "Emitted when the file has been uploaded successfully.",
              "default": true,
              "possiblePrimaryParents": ["default"],
              "type": {
                "properties": {
                  "path": {
                    "description": "The destination path where file was uploaded.",
                    "type": "string"
                  },
                  "size": {
                    "description": "Size of the uploaded file in bytes.",
                    "type": "number"
                  }
                },
                "required": ["path", "size"],
                "type": "object"
              }
            }
          },
          "signals": {},
          "hasOnSync": false,
          "hasOnDrain": false,
          "hasOnTimer": false
        },
        "configExprs": {}
      },
      "eventProcessingComponent": {
        "active": true,
        "outputs": [
          {
            "outputKey": "default",
            "outputCustomizationExpr": null
          }
        ],
        "appBlock": {
          "inputs": [
            {
              "inputKey": "default",
              "configExprs": {
                "content": {
                  "code": "\"nad;fj;afd\""
                },
                "destinationPath": {
                  "code": "\"/tmp/test42\""
                },
                "encoding": {
                  "code": "\"text\""
                },
                "host": {
                  "code": "ref(\"signal.variables.host\")"
                },
                "port": {
                  "code": "2222"
                }
              }
            }
          ]
        }
      }
    },
    {
      "id": "appEntity_3",
      "nameComponent": { "name": "Download File", "description": "" },
      "positionComponent": {
        "position": {
          "x": 552,
          "y": 289
        }
      },
      "appEntityComponent": {
        "appInstallationId": "019721b7-d904-7e42-9c75-2a72efc251e5",
        "blockKey": "downloadFile",
        "schema": {
          "order": 3,
          "name": "Download File",
          "category": "File Transfer",
          "description": "Downloads a file from the remote host via SCP/SFTP.",
          "config": {},
          "hasOnInternalMessage": false,
          "inputs": {
            "default": {
              "order": 0,
              "name": "Download",
              "description": "Download the specified file from the remote host.",
              "config": {
                "encoding": {
                  "order": 4,
                  "name": "Encoding",
                  "description": "Content encoding: 'base64' or 'text'.",
                  "type": {
                    "enum": ["base64", "text"],
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "default": "text",
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "host": {
                  "order": 0,
                  "name": "Host",
                  "description": "Hostname or IP address to connect to.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "port": {
                  "order": 1,
                  "name": "Port",
                  "description": "SSH port for this connection.",
                  "type": {
                    "type": "number"
                  },
                  "fixed": false,
                  "required": true,
                  "default": 22,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "sourcePath": {
                  "order": 2,
                  "name": "Source Path",
                  "description": "Full path of the file to download.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "username": {
                  "order": 3,
                  "name": "Username",
                  "description": "Override the default SSH username for this connection.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": false,
                  "hasValidator": false,
                  "fieldKey": ""
                }
              },
              "hasOnEvent": true
            }
          },
          "outputs": {
            "default": {
              "order": 0,
              "name": "File Downloaded",
              "description": "Emitted when the file has been downloaded successfully.",
              "default": true,
              "possiblePrimaryParents": ["default"],
              "type": {
                "properties": {
                  "content": {
                    "description": "File content (encoded according to input).",
                    "type": "string"
                  },
                  "modifiedTime": {
                    "description": "Last modified timestamp (ISO 8601 format).",
                    "type": "string"
                  },
                  "path": {
                    "description": "The source path that was downloaded.",
                    "type": "string"
                  },
                  "permissions": {
                    "description": "File permissions in octal format.",
                    "type": "string"
                  },
                  "size": {
                    "description": "File size in bytes.",
                    "type": "number"
                  }
                },
                "required": [
                  "content",
                  "path",
                  "size",
                  "permissions",
                  "modifiedTime"
                ],
                "type": "object"
              }
            }
          },
          "signals": {},
          "hasOnSync": false,
          "hasOnDrain": false,
          "hasOnTimer": false
        },
        "configExprs": {}
      },
      "eventProcessingComponent": {
        "active": true,
        "outputs": [
          {
            "outputKey": "default",
            "outputCustomizationExpr": null
          }
        ],
        "appBlock": {
          "inputs": [
            {
              "inputKey": "default",
              "configExprs": {
                "encoding": {
                  "code": "\"text\""
                },
                "host": {
                  "code": "ref(\"signal.variables.host\")"
                },
                "port": {
                  "code": "2222"
                },
                "sourcePath": {
                  "code": "\"/tmp/test42\""
                }
              }
            }
          ]
        }
      }
    },
    {
      "id": "appEntity_4",
      "nameComponent": { "name": "Execute Script", "description": "" },
      "positionComponent": {
        "position": {
          "x": 279,
          "y": 290
        }
      },
      "appEntityComponent": {
        "appInstallationId": "019721b7-d904-7e42-9c75-2a72efc251e5",
        "blockKey": "executeScript",
        "schema": {
          "order": 1,
          "name": "Execute Script",
          "category": "Execution",
          "description": "Uploads a script to a temporary location and executes it on the remote host.",
          "config": {},
          "hasOnInternalMessage": false,
          "inputs": {
            "default": {
              "order": 0,
              "name": "Execute",
              "description": "Execute the specified script on the remote host.",
              "config": {
                "host": {
                  "order": 0,
                  "name": "Host",
                  "description": "Hostname or IP address to connect to.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "interpreter": {
                  "order": 4,
                  "name": "Interpreter",
                  "description": "Script interpreter (defaults to 'sh').",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": false,
                  "default": "sh",
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "port": {
                  "order": 1,
                  "name": "Port",
                  "description": "SSH port for this connection.",
                  "type": {
                    "type": "number"
                  },
                  "fixed": false,
                  "required": true,
                  "default": 22,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "script": {
                  "order": 2,
                  "name": "Script",
                  "description": "The script content to execute.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": true,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "username": {
                  "order": 3,
                  "name": "Username",
                  "description": "Override the default SSH username for this connection.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": false,
                  "hasValidator": false,
                  "fieldKey": ""
                },
                "workingDirectory": {
                  "order": 5,
                  "name": "Working Directory",
                  "description": "Working directory for script execution.",
                  "type": {
                    "type": "string"
                  },
                  "fixed": false,
                  "required": false,
                  "hasValidator": false,
                  "fieldKey": ""
                }
              },
              "hasOnEvent": true
            }
          },
          "outputs": {
            "default": {
              "order": 0,
              "name": "Script Executed",
              "description": "Emitted when the script has been executed successfully.",
              "default": true,
              "possiblePrimaryParents": ["default"],
              "type": {
                "properties": {
                  "duration": {
                    "description": "Execution time in milliseconds.",
                    "type": "number"
                  },
                  "exitCode": {
                    "description": "Exit code of the script.",
                    "type": "number"
                  },
                  "stderr": {
                    "description": "Standard error from the script.",
                    "type": "string"
                  },
                  "stdout": {
                    "description": "Standard output from the script.",
                    "type": "string"
                  }
                },
                "required": ["stdout", "stderr", "exitCode", "duration"],
                "type": "object"
              }
            }
          },
          "signals": {},
          "hasOnSync": false,
          "hasOnDrain": false,
          "hasOnTimer": false
        },
        "configExprs": {}
      },
      "eventProcessingComponent": {
        "active": true,
        "outputs": [
          {
            "outputKey": "default",
            "outputCustomizationExpr": null
          }
        ],
        "appBlock": {
          "inputs": [
            {
              "inputKey": "default",
              "configExprs": {
                "host": {
                  "code": "ref(\"signal.variables.host\")"
                },
                "interpreter": {
                  "code": "\"sh\""
                },
                "port": {
                  "code": "2222"
                },
                "script": {
                  "code": "`\necho papaya\necho test\nls -la\necho aaa\n`"
                }
              }
            }
          ]
        }
      }
    },
    {
      "id": "appEntity_5",
      "nameComponent": { "name": "Variables", "description": "" },
      "positionComponent": {
        "position": {
          "x": 0,
          "y": 0
        }
      },
      "appEntityComponent": {
        "appInstallationId": "019730ac-6cea-7e2c-a962-06bc2788806d",
        "blockKey": "variables",
        "schema": {
          "order": 0,
          "name": "Variables",
          "category": "Testing",
          "description": "A block that creates signals from a variables configuration object.",
          "config": {
            "variables": {
              "order": 0,
              "name": "Variables",
              "description": "A JSON object where each field will become a signal with the field's value.",
              "type": {
                "description": "An object containing key-value pairs that will be converted to signals",
                "type": "object"
              },
              "fixed": false,
              "required": true,
              "default": {},
              "hasValidator": false,
              "fieldKey": ""
            }
          },
          "hasOnInternalMessage": false,
          "inputs": {},
          "outputs": {},
          "signals": {},
          "hasOnSync": true,
          "hasOnDrain": false,
          "hasOnTimer": false
        },
        "configExprs": {
          "variables": {
            "code": "{\n  \"host\": \"192.168.97.10\"\n}"
          }
        }
      },
      "eventProcessingComponent": {
        "active": true,
        "outputs": [],
        "appBlock": {
          "inputs": []
        }
      },
      "lifecycleComponent": {}
    }
  ],
  "blockLinks": [
    {
      "fromEntityId": "appEntity_2",
      "fromOutputKey": "default",
      "toEntityId": "appEntity_3",
      "toInputKey": "default"
    }
  ],
  "appInstallations": [
    {
      "id": "019730ac-6cea-7e2c-a962-06bc2788806d",
      "name": "Test Utilities",
      "appId": "0197309a-1c3b-716f-b80f-7907d28db0de",
      "appName": "Test Utilities",
      "appVersion": "0.1.0"
    },
    {
      "id": "019721b7-d904-7e42-9c75-2a72efc251e5",
      "name": "SSH",
      "appId": "019721a7-1a60-7d69-8ed2-ab3ea9286d3e",
      "appName": "SSH",
      "appVersion": "0.3.0"
    }
  ],
  "exportedFrom": "019721a9-6051-76c7-a06f-8dbe947392ca"
}
